<script src="/vendor/ToasifyJs/toastify-js.js"></script>
<script src="/vendor/Axios/axios.min.js"></script>
<script src="/vendor/Joi/joi-browser.min.js"></script>
<script src="/js/config/configAxios.js"></script>
<script src="/js/utils/validation.js"></script>
<script src="/js/utils/handleError.js"></script>
<script src="/js/utils/toast.js"></script>
<script src="/js/utils/header.js"></script>

<!-- Bootstrap JS -->
<script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<!-- Cropper.js -->
<script
    src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.6.2/cropper.min.js"></script>

<script
    src="https://cdn.jsdelivr.net/npm/tom-select@2.4.2/dist/js/tom-select.complete.min.js"></script>
<script src="/vendor/QuilJs/quill.js"></script>
<script src="/vendor/momentjs/moment.min.js"></script>
<script src="
https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js
"></script>
<script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>


<script>
        let userSocketId = null;

async function connectToSocket() {
    try {
        const response = await axiosInstance.get("/auth/me");
        // console.log(response);
        
        userSocketId = response.data.data.id;
        console.log(userSocketId);
        if (userSocketId) {
            // Connect to the Socket.IO server
            const socket = io(); // Replace with your server URL

            // Join the room for this buyer
            socket.emit('join', userSocketId);

            // Listen for notifications
            socket.on('notification', (data) => {
                console.log('New notification:', data);
                alert(data.eng_message); // Display the notification
            });
        } else {
            console.log("User is not authenticated. Socket.IO connection skipped.");
        }
    } catch (error) {
        userSocketId = null;
        console.log(error);
        
    }
}


    document.addEventListener("DOMContentLoaded", function () {
        lucide.createIcons();
        connectToSocket()
    const loader = document.getElementById("loader-overlay");

    // Hide the loader once the page is fully loaded
    window.addEventListener("load", function () {
        setTimeout(() => {
            if(loader){

                loader.classList.add("hidden"); // Add hidden class to fade out
            }
        }, 1000); // Matches the animation duration
    });

    // Show loader when navigating to another page
    
});

</script>
